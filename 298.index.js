"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[298],{298:(n,e,t)=>{t.r(e),t.d(e,{main:()=>R,wasm_alert:()=>W,create_and_load_resource_cache:()=>O,create_empty_resource_cache:()=>j,get_resource:()=>S,insert_resource:()=>U,create_webraytracer:()=>C,seed_rand:()=>T,render_image:()=>$,multi_sample_buffer:()=>E,multi_sample_point:()=>I,initThreadPool:()=>L,wbg_rayon_start_worker:()=>P,ResourceCache:()=>q,WebRaytracer:()=>J,wbg_rayon_PoolBuilder:()=>N,default:()=>z});var r=t(151);let _;const o=new Array(32).fill(void 0);function c(n){return o[n]}o.push(void 0,null,!0,!1);let i=o.length;function u(n){const e=c(n);return function(n){n<36||(o[n]=i,i=n)}(n),e}let a=0,b=null;function f(){return null!==b&&b.buffer===_.memory.buffer||(b=new Uint8Array(_.memory.buffer)),b}let w=new TextEncoder("utf-8");function s(n,e,t){if(void 0===t){const t=w.encode(n),r=e(t.length);return f().subarray(r,r+t.length).set(t),a=t.length,r}let r=n.length,_=e(r);const o=f();let c=0;for(;c<r;c++){const e=n.charCodeAt(c);if(e>127)break;o[_+c]=e}if(c!==r){0!==c&&(n=n.slice(c)),_=t(_,r,r=c+3*n.length);const e=function(n,e){const t=w.encode(n);return e.set(t),{read:n.length,written:t.length}}(n,f().subarray(_+c,_+r));c+=e.written}return a=c,_}let g=null;function l(){return null!==g&&g.buffer===_.memory.buffer||(g=new Int32Array(_.memory.buffer)),g}let d=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function y(n,e){return d.decode(f().slice(n,n+e))}function m(n){i===o.length&&o.push(o.length+1);const e=i;return i=o[e],o[e]=n,e}function p(n){return null==n}function h(n){const e=typeof n;if("number"==e||"boolean"==e||null==n)return`${n}`;if("string"==e)return`"${n}"`;if("symbol"==e){const e=n.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=n.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(n)){const e=n.length;let t="[";e>0&&(t+=h(n[0]));for(let r=1;r<e;r++)t+=", "+h(n[r]);return t+="]",t}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(!(t.length>1))return toString.call(n);if(r=t[1],"Object"==r)try{return"Object("+JSON.stringify(n)+")"}catch(n){return"Object"}return n instanceof Error?`${n.name}: ${n.message}\n${n.stack}`:r}function v(n,e,t,r){const o={a:n,b:e,cnt:1,dtor:t},c=(...n)=>{o.cnt++;const e=o.a;o.a=0;try{return r(e,o.b,...n)}finally{0==--o.cnt?_.__wbindgen_export_3.get(o.dtor)(e,o.b):o.a=e}};return c.original=o,c}function A(n,e,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1c54da95a8c29062(n,e,m(t))}function k(n,e,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1c54da95a8c29062(n,e,m(t))}function R(){_.main()}function W(n){var e=s(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=a;_.wasm_alert(e,t)}function O(n){return u(_.create_and_load_resource_cache(m(n)))}function j(){var n=_.create_empty_resource_cache();return q.__wrap(n)}function x(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`);return n.ptr}function S(n,e){try{const b=_.__wbindgen_add_to_stack_pointer(-16);x(n,q);var t=s(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=a;_.get_resource(b,n.ptr,t,r);var o=l()[b/4+0],c=l()[b/4+1];let w;return 0!==o&&(w=(i=o,u=c,f().subarray(i/1,i/1+u)).slice(),_.__wbindgen_free(o,1*c)),w}finally{_.__wbindgen_add_to_stack_pointer(16)}var i,u}function U(n,e,t){x(n,q);var r=s(e,_.__wbindgen_malloc,_.__wbindgen_realloc),o=a,c=function(n,e){const t=e(1*n.length);return f().set(n,t/1),a=n.length,t}(t,_.__wbindgen_malloc),i=a;_.insert_resource(n.ptr,r,o,c,i)}function C(n,e,t,r,o,c,i){x(n,q);var u=_.create_webraytracer(n.ptr,e,t,r,o,c,i);return J.__wrap(u)}function T(n){_.seed_rand(n)}d.decode();let M=null;function $(n){try{const i=_.__wbindgen_add_to_stack_pointer(-16);x(n,J),_.render_image(i,n.ptr);var e=l()[i/4+0],t=l()[i/4+1],r=(o=e,c=t,(null!==M&&M.buffer===_.memory.buffer||(M=new Uint8ClampedArray(_.memory.buffer)),M).subarray(o/1,o/1+c)).slice();return _.__wbindgen_free(e,1*t),r}finally{_.__wbindgen_add_to_stack_pointer(16)}var o,c}let F=null;function E(n,e){try{const u=_.__wbindgen_add_to_stack_pointer(-16);x(n,J),_.multi_sample_buffer(u,n.ptr,e);var t=l()[u/4+0],r=l()[u/4+1],o=(c=t,i=r,(null!==F&&F.buffer===_.memory.buffer||(F=new Float32Array(_.memory.buffer)),F).subarray(c/4,c/4+i)).slice();return _.__wbindgen_free(t,4*r),o}finally{_.__wbindgen_add_to_stack_pointer(16)}var c,i}function I(n,e,t){return x(n,J),_.multi_sample_point(n.ptr,e,t)>>>0}function B(n,e){try{return n.apply(this,e)}catch(n){_.__wbindgen_exn_store(m(n))}}function L(n){return u(_.initThreadPool(n))}function P(n){_.wbg_rayon_start_worker(n)}class q{static __wrap(n){const e=Object.create(q.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_resourcecache_free(n)}}class J{static __wrap(n){const e=Object.create(J.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_webraytracer_free(n)}}class N{static __wrap(n){const e=Object.create(N.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_wbg_rayon_poolbuilder_free(n)}numThreads(){return _.wbg_rayon_poolbuilder_numThreads(this.ptr)>>>0}receiver(){return _.wbg_rayon_poolbuilder_receiver(this.ptr)}build(){_.wbg_rayon_poolbuilder_build(this.ptr)}}const z=async function n(e,o){void 0===e&&(e=new URL(t(442),t.b));const i={wbg:{}};i.wbg.__wbindgen_object_drop_ref=function(n){u(n)},i.wbg.__wbindgen_json_serialize=function(n,e){const t=c(e);var r=s(JSON.stringify(void 0===t?null:t),_.__wbindgen_malloc,_.__wbindgen_realloc),o=a;l()[n/4+1]=o,l()[n/4+0]=r},i.wbg.__wbg_resourcecache_new=function(n){return m(q.__wrap(n))},i.wbg.__wbindgen_string_new=function(n,e){return m(y(n,e))},i.wbg.__wbindgen_cb_drop=function(n){const e=u(n).original;return 1==e.cnt--&&(e.a=0,!0)},i.wbg.__wbg_new_693216e109162396=function(){return m(new Error)},i.wbg.__wbg_stack_0ddaca5d1abfb52f=function(n,e){var t=s(c(e).stack,_.__wbindgen_malloc,_.__wbindgen_realloc),r=a;l()[n/4+1]=r,l()[n/4+0]=t},i.wbg.__wbg_error_09919627ac0992f5=function(n,e){try{console.error(y(n,e))}finally{_.__wbindgen_free(n,e)}},i.wbg.__wbindgen_object_clone_ref=function(n){return m(c(n))},i.wbg.__wbg_fetch_45791be0f20b9c8d=function(n){return m(fetch(c(n)))},i.wbg.__wbg_waitAsync_72704e396e56aa71=function(){return m(Atomics.waitAsync)},i.wbg.__wbindgen_is_undefined=function(n){return void 0===c(n)},i.wbg.__wbg_waitAsync_1f6fd82e7a6babc6=function(n,e,t){return m(Atomics.waitAsync(c(n),e,t))},i.wbg.__wbg_async_42d16e10f4e1c02b=function(n){return c(n).async},i.wbg.__wbg_value_148fbf142e2aeecc=function(n){return m(c(n).value)},i.wbg.__wbindgen_number_new=function(n){return m(n)},i.wbg.__wbg_instanceof_Window_c4b70662a0d2c5ec=function(n){return c(n)instanceof Window},i.wbg.__wbg_document_1c64944725c0d81d=function(n){var e=c(n).document;return p(e)?0:m(e)},i.wbg.__wbg_URL_db6637e306672144=function(){return B((function(n,e){var t=s(c(e).URL,_.__wbindgen_malloc,_.__wbindgen_realloc),r=a;l()[n/4+1]=r,l()[n/4+0]=t}),arguments)},i.wbg.__wbg_new_9c35e8e8b09fb4a3=function(){return B((function(){return m(new Headers)}),arguments)},i.wbg.__wbg_append_fb85316567f7a798=function(){return B((function(n,e,t,r,_){c(n).append(y(e,t),y(r,_))}),arguments)},i.wbg.__wbindgen_string_get=function(n,e){const t=c(e);var r="string"==typeof t?t:void 0,o=p(r)?0:s(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=a;l()[n/4+1]=i,l()[n/4+0]=o},i.wbg.__wbg_log_3445347661d4505e=function(n){console.log(c(n))},i.wbg.__wbg_fetch_b4e81012e07ff95a=function(n,e){return m(c(n).fetch(c(e)))},i.wbg.__wbg_instanceof_Response_e1b11afbefa5b563=function(n){return c(n)instanceof Response},i.wbg.__wbg_url_50e0bdb6051741be=function(n,e){var t=s(c(e).url,_.__wbindgen_malloc,_.__wbindgen_realloc),r=a;l()[n/4+1]=r,l()[n/4+0]=t},i.wbg.__wbg_status_6d8bb444ddc5a7b2=function(n){return c(n).status},i.wbg.__wbg_headers_5ffa990806e04cfc=function(n){return m(c(n).headers)},i.wbg.__wbg_arrayBuffer_b8937ed04beb0d36=function(){return B((function(n){return m(c(n).arrayBuffer())}),arguments)},i.wbg.__wbg_setonmessage_6476b98f78b884f1=function(n,e){c(n).onmessage=c(e)},i.wbg.__wbg_new_fdd3ee9cda3de16f=function(){return B((function(n,e){return m(new Worker(y(n,e)))}),arguments)},i.wbg.__wbg_postMessage_19f6e3c6d1114464=function(){return B((function(n,e){c(n).postMessage(c(e))}),arguments)},i.wbg.__wbg_newwithstrandinit_9b0fa00478c37287=function(){return B((function(n,e,t){return m(new Request(y(n,e),c(t)))}),arguments)},i.wbg.__wbg_data_9e55e7d79ab13ef1=function(n){return m(c(n).data)},i.wbg.__wbindgen_is_function=function(n){return"function"==typeof c(n)},i.wbg.__wbg_newnoargs_be86524d73f67598=function(n,e){return m(new Function(y(n,e)))},i.wbg.__wbindgen_is_object=function(n){const e=c(n);return"object"==typeof e&&null!==e},i.wbg.__wbg_next_c4151d46d5fa7097=function(n){return m(c(n).next)},i.wbg.__wbg_next_7720502039b96d00=function(){return B((function(n){return m(c(n).next())}),arguments)},i.wbg.__wbg_done_b06cf0578e89ff68=function(n){return c(n).done},i.wbg.__wbg_value_e74a542443d92451=function(n){return m(c(n).value)},i.wbg.__wbg_iterator_4fc4ce93e6b92958=function(){return m(Symbol.iterator)},i.wbg.__wbg_get_4d0f21c2f823742e=function(){return B((function(n,e){return m(Reflect.get(c(n),c(e)))}),arguments)},i.wbg.__wbg_call_888d259a5fefc347=function(){return B((function(n,e){return m(c(n).call(c(e)))}),arguments)},i.wbg.__wbg_new_0b83d3df67ecb33e=function(){return m(new Object)},i.wbg.__wbg_self_c6fbdfc2918d5e58=function(){return B((function(){return m(self.self)}),arguments)},i.wbg.__wbg_window_baec038b5ab35c54=function(){return B((function(){return m(window.window)}),arguments)},i.wbg.__wbg_globalThis_3f735a5746d41fbd=function(){return B((function(){return m(globalThis.globalThis)}),arguments)},i.wbg.__wbg_global_1bc0b39582740e95=function(){return B((function(){return m(t.g.global)}),arguments)},i.wbg.__wbg_encodeURIComponent_1fbf39f0996c5167=function(n,e){return m(encodeURIComponent(y(n,e)))},i.wbg.__wbg_of_caa367a9243230d0=function(n,e,t){return m(Array.of(c(n),c(e),c(t)))},i.wbg.__wbg_call_346669c262382ad7=function(){return B((function(n,e,t){return m(c(n).call(c(e),c(t)))}),arguments)},i.wbg.__wbg_new_b1d61b5687f5e73a=function(n,e){try{var t={a:n,b:e},r=new Promise(((n,e)=>{const r=t.a;t.a=0;try{return function(n,e,t,r){_.wasm_bindgen__convert__closures__invoke2_mut__h473af8d65ba07f2c(n,e,m(t),m(r))}(r,t.b,n,e)}finally{t.a=r}}));return m(r)}finally{t.a=t.b=0}},i.wbg.__wbg_resolve_d23068002f584f22=function(n){return m(Promise.resolve(c(n)))},i.wbg.__wbg_then_2fcac196782070cc=function(n,e){return m(c(n).then(c(e)))},i.wbg.__wbg_then_8c2d62e8ae5978f7=function(n,e,t){return m(c(n).then(c(e),c(t)))},i.wbg.__wbg_buffer_397eaa4d72ee94dd=function(n){return m(c(n).buffer)},i.wbg.__wbg_new_69ece9a32977b4d4=function(n){return m(new Int32Array(c(n)))},i.wbg.__wbg_newwithbyteoffsetandlength_4b9b8c4e3f5adbff=function(n,e,t){return m(new Uint8Array(c(n),e>>>0,t>>>0))},i.wbg.__wbg_new_a7ce447f15ff496f=function(n){return m(new Uint8Array(c(n)))},i.wbg.__wbg_set_969ad0a60e51d320=function(n,e,t){c(n).set(c(e),t>>>0)},i.wbg.__wbg_length_1eb8fc608a0d4cdb=function(n){return c(n).length},i.wbg.__wbg_has_1275b5eec3dc7a7a=function(){return B((function(n,e){return Reflect.has(c(n),c(e))}),arguments)},i.wbg.__wbg_set_82a4e8a85e31ac42=function(){return B((function(n,e,t){return Reflect.set(c(n),c(e),c(t))}),arguments)},i.wbg.__wbg_stringify_d4507a59932eed0c=function(){return B((function(n){return m(JSON.stringify(c(n)))}),arguments)},i.wbg.__wbindgen_debug_string=function(n,e){var t=s(h(c(e)),_.__wbindgen_malloc,_.__wbindgen_realloc),r=a;l()[n/4+1]=r,l()[n/4+0]=t},i.wbg.__wbindgen_throw=function(n,e){throw new Error(y(n,e))},i.wbg.__wbindgen_rethrow=function(n){throw u(n)},i.wbg.__wbindgen_module=function(){return m(n.__wbindgen_wasm_module)},i.wbg.__wbindgen_memory=function(){return m(_.memory)},i.wbg.__wbg_startWorkers_04f63eca19916b8f=function(n,e,t){return m((0,r.Q)(u(n),u(e),N.__wrap(t)))},i.wbg.__wbindgen_closure_wrapper332=function(n,e,t){return m(v(n,e,127,A))},i.wbg.__wbindgen_closure_wrapper333=function(n,e,t){return m(v(n,e,127,k))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e)),i.wbg.memory=o||new WebAssembly.Memory({initial:21,maximum:16384,shared:!0});const{instance:b,module:f}=await async function(n,e){if("function"==typeof Response&&n instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(n,e)}catch(e){if("application/wasm"==n.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}(await e,i);return _=b.exports,n.__wbindgen_wasm_module=f,_.__wbindgen_start(),_}},442:(n,e,t)=>{n.exports=t.p+"e1afef343f2655076476.wasm"}}]);