"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[298],{298:(e,n,t)=>{t.r(n),t.d(n,{main:()=>w,wasm_alert:()=>y,create_webraytracer:()=>p,seed_rand:()=>h,render_image:()=>R,multi_sample_buffer:()=>x,multi_sample_point:()=>C,initThreadPool:()=>E,wbg_rayon_start_worker:()=>U,WebRaytracer:()=>M,wbg_rayon_PoolBuilder:()=>O,default:()=>j});var r=t(151);let o,a=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let i=null;function _(){return null!==i&&i.buffer===o.memory.buffer||(i=new Uint8Array(o.memory.buffer)),i}function s(e,n){return a.decode(_().slice(e,e+n))}const c=new Array(32).fill(void 0);c.push(void 0,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const n=u;return u=c[n],c[n]=e,n}function f(e){return c[e]}function b(e){const n=f(e);return function(e){e<36||(c[e]=u,u=e)}(e),n}function w(){o.main()}let d=0,g=new TextEncoder("utf-8");function m(e,n,t){if(void 0===t){const t=g.encode(e),r=n(t.length);return _().subarray(r,r+t.length).set(t),d=t.length,r}let r=e.length,o=n(r);const a=_();let i=0;for(;i<r;i++){const n=e.charCodeAt(i);if(n>127)break;a[o+i]=n}if(i!==r){0!==i&&(e=e.slice(i)),o=t(o,r,r=i+3*e.length);const n=function(e,n){const t=g.encode(e);return n.set(t),{read:e.length,written:t.length}}(e,_().subarray(o+i,o+r));i+=n.written}return d=i,o}function y(e){var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=d;o.wasm_alert(n,t)}function p(e,n,t,r){var a=o.create_webraytracer(e,n,t,r);return M.__wrap(a)}function h(e){o.seed_rand(e)}function v(e,n){if(!(e instanceof n))throw new Error(`expected instance of ${n.name}`);return e.ptr}let k=null;function A(){return null!==k&&k.buffer===o.memory.buffer||(k=new Int32Array(o.memory.buffer)),k}let W=null;function R(e){try{const _=o.__wbindgen_add_to_stack_pointer(-16);v(e,M),o.render_image(_,e.ptr);var n=A()[_/4+0],t=A()[_/4+1],r=(a=n,i=t,(null!==W&&W.buffer===o.memory.buffer||(W=new Uint8ClampedArray(o.memory.buffer)),W).subarray(a/1,a/1+i)).slice();return o.__wbindgen_free(n,1*t),r}finally{o.__wbindgen_add_to_stack_pointer(16)}var a,i}let T=null;function x(e,n){try{const s=o.__wbindgen_add_to_stack_pointer(-16);v(e,M),o.multi_sample_buffer(s,e.ptr,n);var t=A()[s/4+0],r=A()[s/4+1],a=(i=t,_=r,(null!==T&&T.buffer===o.memory.buffer||(T=new Float32Array(o.memory.buffer)),T).subarray(i/4,i/4+_)).slice();return o.__wbindgen_free(t,4*r),a}finally{o.__wbindgen_add_to_stack_pointer(16)}var i,_}function C(e,n,t){return v(e,M),o.multi_sample_point(e.ptr,n,t)>>>0}function E(e){return b(o.initThreadPool(e))}function U(e){o.wbg_rayon_start_worker(e)}class M{static __wrap(e){const n=Object.create(M.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();o.__wbg_webraytracer_free(e)}}class O{static __wrap(e){const n=Object.create(O.prototype);return n.ptr=e,n}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();o.__wbg_wbg_rayon_poolbuilder_free(e)}numThreads(){return o.wbg_rayon_poolbuilder_numThreads(this.ptr)>>>0}receiver(){return o.wbg_rayon_poolbuilder_receiver(this.ptr)}build(){o.wbg_rayon_poolbuilder_build(this.ptr)}}const j=async function e(n,a){void 0===n&&(n=new URL(t(442),t.b));const i={wbg:{}};i.wbg.__wbindgen_string_new=function(e,n){return l(s(e,n))},i.wbg.__wbindgen_object_drop_ref=function(e){b(e)},i.wbg.__wbg_new_693216e109162396=function(){return l(new Error)},i.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,n){var t=m(f(n).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),r=d;A()[e/4+1]=r,A()[e/4+0]=t},i.wbg.__wbg_error_09919627ac0992f5=function(e,n){try{console.error(s(e,n))}finally{o.__wbindgen_free(e,n)}},i.wbg.__wbg_log_3445347661d4505e=function(e){console.log(f(e))},i.wbg.__wbindgen_throw=function(e,n){throw new Error(s(e,n))},i.wbg.__wbindgen_module=function(){return l(e.__wbindgen_wasm_module)},i.wbg.__wbindgen_memory=function(){return l(o.memory)},i.wbg.__wbg_startWorkers_04f63eca19916b8f=function(e,n,t){return l((0,r.Q)(b(e),b(n),O.__wrap(t)))},("string"==typeof n||"function"==typeof Request&&n instanceof Request||"function"==typeof URL&&n instanceof URL)&&(n=fetch(n)),i.wbg.memory=a||new WebAssembly.Memory({initial:17,maximum:16384,shared:!0});const{instance:_,module:c}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await n,i);return o=_.exports,e.__wbindgen_wasm_module=c,o.__wbindgen_start(),o}},442:(e,n,t)=>{e.exports=t.p+"903e1fe2fbf34cf80ce4.wasm"}}]);